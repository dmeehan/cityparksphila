 {% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags taggit_templatetags2_tags %}

{% block body_class %}body--blog{% endblock %}

{% block content %}
<main>
    <section class="content">
        <h1>{{ page.title }}</h1>

        <div class="intro">{{ page.intro|richtext }}</div>

        {% for post in blogpages %}
        {% with post=post.specific %}
            <h2><a href="{% pageurl post %}">{{ post.title }}</a></h2>

            {% with post.main_image as main_image %}
                {% if main_image %}{% image main_image fill-160x100 %}{% endif %}
            {% endwith %}

            <p>{{ post.intro }}</p>
        {% endwith %}
        {% endfor %}
        <aside>
            {% get_taglist as tags for 'blog.BlogPage' %}
            <ul>
                {% for tag in tags %}
                <li><a href="{% slugurl 'tags' %}?tag={{ tag }}"><span class="badge--default">{{ tag }}  {{tag.num_times}} </span></a></li>
                {% endfor %}
            </ul>
        </aside>
    </section>
</main>
{% endblock %}